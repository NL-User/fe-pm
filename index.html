<!DOCTYPE html>
<html style="width: 95%; height: 100%; margin: 0 2.5%;">
<head>
<title>基本情報午後</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="">
<script>
    const randRange = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
    let url = "";
    const season = ["haru","aki","toku"];
    function change(term="random"){
        changeURL();
        console.log(term);
        let target_year, target_problem, target_season;
        while(true){
            target_year = String(randRange(21,31));
            if (term === "random"){
                target_problem = randRange(1,9);
            }else if(term === "seq"){
                target_problem = 1;
            }else if (term === "alu"){
                target_problem = 8;
            }else if(term === "c"){
                target_problem = 9;
            }else{
                target_problem = randRange(2,7);
            }
            target_season = season[Math.floor(Math.random() * (season.length - 1))];
            if (target_problem < 10){
                target_problem = "0" + String(target_problem);
            }else{
                target_problem = String(target_problem);
            }
            if (target_year === "23" && target_season === "haru"){
                target_season = season[2];
            }
            if (target_year === "31" && target_season ==="aki"){
                continue;
            }else{
                break;
            }
            
        }

        url = url.replace(/[0-9]{2}_.+\//,target_year + "_" + target_season + "/");
        url = url.replace(/(pm[0-9]+)/,"pm" + target_problem);
        console.log(url);
        document.getElementById('target_frame').src = url;
        document.getElementById('link').href = url;
    }
    function button(){
        let num = document._form._select.selectedIndex;
        change(document._form._select.options[num].value);
    }

    function changeURL(){
        if (window.innerWidth < 800){
            url = "https://www.fe-siken.com/s/kakomon/22_haru/pm04.html";
        }else {
            url = "https://www.fe-siken.com/kakomon/22_haru/pm04.html";
        }
    }
    window.onload = function() {
        change();
    };
</script>
</head>
<body style="width: 97%; height: 97%; margin: 1.5%;">
<div style="width: 100%; height: 8%;">
    <form name="_form">
        <select name="_select">
            <option value="random" selected>ランダム</option>
            <option value="seq">問1（セキュリティ）</option>
            <option value="selecct">問2~7</option>
            <option value="alu">問8（アルゴリズム）</option>
            <option value="c">問9（C言語）</option>
        </select>
        <input value="問題を変更" type="button" onclick="button()" />
        <br>
        <a id="link" href="" target="_blank">公式へのリンク</a>
    </form>
</div>
<iframe style="border: none;" width="100%" height="92%" id="target_frame" src="">
</iframe>
</body>
